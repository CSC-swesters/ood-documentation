

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Enable Reverse Proxy &mdash; Open OnDemand 2.0.20 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Enable Interactive Desktop" href="../../../../enable-desktops.html" />
    <link rel="prev" title="2. Modify Cluster Configuration" href="modify-cluster-configuration.html" />
 
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-34776817-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-34776817-3');
</script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html">
          

          
            
            <img src="../../../../_static/logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference.html">Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary.html">Glossary</a></li>
</ul>
<p class="caption"><span class="caption-text">Install</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation/add-cluster-config.html">Add Cluster Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation/resource-manager.html">Resource Manager Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../customization_overview.html">Customization Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../customization.html">Customization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../analytics.html">Analytics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../monitoring.html">Monitoring</a></li>
</ul>
<p class="caption"><span class="caption-text">How-Tos</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../apps.html">Creating Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app-development.html">App Development</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorials/tutorials-interactive-apps.html">Tutorials: Interactive Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorials/tutorials-passenger-apps.html">Tutorials: Passenger Apps</a></li>
</ul>
<p class="caption"><span class="caption-text">Extend</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../setup.html">Setup Interactive Apps</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="software-requirements.html">1. Software Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="modify-cluster-configuration.html">2. Modify Cluster Configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3. Enable Reverse Proxy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requirements">3.1. Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#steps-to-enable-in-apache">3.2. Steps to Enable in Apache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#verify-it-works">3.3. Verify it Works</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../enable-desktops.html">Enable Interactive Desktop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../install-ihpc-apps.html">Install Other Interactive Apps</a></li>
</ul>
<p class="caption"><span class="caption-text">Deploy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../app-authorization.html">App Authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../app-sharing.html">App Sharing</a></li>
</ul>
<p class="caption"><span class="caption-text">Known Issues</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../issues/overview.html">OnDemand’s Known Issues</a></li>
</ul>
<p class="caption"><span class="caption-text">Legacy Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../applications.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../user-documentation.html">User Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Open OnDemand</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../setup.html">Setup Interactive Apps</a> &raquo;</li>
        
      <li>3. Enable Reverse Proxy</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSC/ood-documentation/blob/develop/source/how-tos/app-development/interactive/setup/enable-reverse-proxy.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="enable-reverse-proxy">
<span id="app-development-interactive-setup-enable-reverse-proxy"></span><h1>3. Enable Reverse Proxy<a class="headerlink" href="#enable-reverse-proxy" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference external" href="https://en.wikipedia.org/wiki/Reverse_proxy">reverse proxy</a> will proxy a request to any specified host and port through
IP sockets. This can be used to connect to Jupyter notebook servers, RStudio
servers, VNC servers, and more… This is disabled by default as it can be a
security risk if not properly setup using a good <code class="docutils literal notranslate"><span class="pre">host_regex</span></code>.</p>
<p>You can read more about how this works in Open OnDemand under
<a class="reference internal" href="../../../../reference/files/ood-portal-yml.html#ood-portal-generator-configuration-configure-reverse-proxy"><span class="std std-ref">Configure Reverse Proxy</span></a>.</p>
<div class="section" id="requirements">
<h2>3.1. Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">a regular expression that best describes all the hosts that you would want a
user to connect to through the proxy (e.g., <code class="docutils literal notranslate"><span class="pre">[\w.-]+\.osc\.edu</span></code>)</p>
</li>
<li><p class="first">confirm that if you run the command <code class="docutils literal notranslate"><span class="pre">hostname</span></code> from a compute node it will
return a string that matches the above regular expression</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>hostname
<span class="c1"># n0001.ten.osc.edu</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If the <strong class="command">hostname</strong> command gives you a value that cannot be used
to connect to the compute node from the OnDemand host, then you can
override it in the cluster config with a <strong class="command">bash</strong> command that will
work, e.g.:</p>
<div class="last highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># /etc/ood/config/clusters.d/cluster1.yml</span>
<span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">v2</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">metadata</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">title</span><span class="p p-Indicator">:</span> <span class="s">&quot;Cluster</span><span class="nv"> </span><span class="s">1&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">login</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">host</span><span class="p p-Indicator">:</span> <span class="s">&quot;cluster1.my_center.edu&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">job</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">adapter</span><span class="p p-Indicator">:</span> <span class="s">&quot;...&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="l l-Scalar l-Scalar-Plain">batch_connect</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">basic</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">script_wrapper</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">|</span>
        <span class="no">module purge</span>
        <span class="no">%s</span>
<span class="hll">      <span class="l l-Scalar l-Scalar-Plain">set_host</span><span class="p p-Indicator">:</span> <span class="s">&quot;host=$(hostname</span><span class="nv"> </span><span class="s">-A</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">awk</span><span class="nv"> </span><span class="s">&#39;{print</span><span class="nv"> </span><span class="s">$1}&#39;)&quot;</span>
</span>    <span class="l l-Scalar l-Scalar-Plain">vnc</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">script_wrapper</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">|</span>
        <span class="no">module purge</span>
        <span class="no">export PATH=&quot;/usr/local/turbovnc/bin:$PATH&quot;</span>
        <span class="no">export WEBSOCKIFY_CMD=&quot;/usr/local/websockify/run&quot;</span>
        <span class="no">%s</span>
<span class="hll">      <span class="l l-Scalar l-Scalar-Plain">set_host</span><span class="p p-Indicator">:</span> <span class="s">&quot;host=$(hostname</span><span class="nv"> </span><span class="s">-A</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">awk</span><span class="nv"> </span><span class="s">&#39;{print</span><span class="nv"> </span><span class="s">$1}&#39;)&quot;</span>
</span></pre></div>
</div>
</div>
</li>
</ul>
</div>
<div class="section" id="steps-to-enable-in-apache">
<h2>3.2. Steps to Enable in Apache<a class="headerlink" href="#steps-to-enable-in-apache" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">This requires modifying the YAML configuration file for
<a class="reference internal" href="../../../../reference/commands/ood-portal-generator.html#ood-portal-generator"><span class="std std-ref">ood-portal-generator</span></a> located at
<code class="file docutils literal notranslate"><span class="pre">/etc/ood/config/ood_portal.yml</span></code> as such:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># /etc/ood/config/ood_portal.yml</span>
<span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">servername</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ondemand.my_center.edu</span>
<span class="l l-Scalar l-Scalar-Plain">ssl</span><span class="p p-Indicator">:</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;SSLCertificateFile</span><span class="nv"> </span><span class="s">&quot;/etc/pki/tls/certs/ondemand.my_center.edu.crt&quot;&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;SSLCertificateKeyFile</span><span class="nv"> </span><span class="s">&quot;/etc/pki/tls/private/ondemand.my_center.edu.key&quot;&#39;</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;SSLCertificateChainFile</span><span class="nv"> </span><span class="s">&quot;/etc/pki/tls/certs/ondemand.my_center.edu-interm.crt&quot;&#39;</span>
<span class="l l-Scalar l-Scalar-Plain">dex</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">connectors</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ldap</span>
      <span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ldap</span>
      <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">LDAP</span>
      <span class="l l-Scalar l-Scalar-Plain">config</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">host</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">openldap.my_center.edu:636</span>
        <span class="l l-Scalar l-Scalar-Plain">insecureSkipVerify</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
        <span class="l l-Scalar l-Scalar-Plain">bindDN</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">cn=admin,dc=example,dc=org</span>
<span class="hll">        <span class="l l-Scalar l-Scalar-Plain">bindPW</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
</span><span class="hll">        <span class="l l-Scalar l-Scalar-Plain">userSearch</span><span class="p p-Indicator">:</span>
</span><span class="hll">          <span class="l l-Scalar l-Scalar-Plain">baseDN</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ou=People,dc=example,dc=org</span>
</span><span class="hll">          <span class="l l-Scalar l-Scalar-Plain">filter</span><span class="p p-Indicator">:</span> <span class="s">&quot;(objectClass=posixAccount)&quot;</span>
</span><span class="hll">          <span class="l l-Scalar l-Scalar-Plain">username</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">uid</span>
</span><span class="hll">          <span class="l l-Scalar l-Scalar-Plain">idAttr</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">uid</span>
</span><span class="hll">          <span class="l l-Scalar l-Scalar-Plain">emailAttr</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">mail</span>
</span><span class="hll">          <span class="l l-Scalar l-Scalar-Plain">nameAttr</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">gecos</span>
</span><span class="hll">          <span class="l l-Scalar l-Scalar-Plain">preferredUsernameAttr</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">uid</span>
</span><span class="hll">        <span class="l l-Scalar l-Scalar-Plain">groupSearch</span><span class="p p-Indicator">:</span>
</span><span class="hll">          <span class="l l-Scalar l-Scalar-Plain">baseDN</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">ou=Groups,dc=example,dc=org</span>
</span><span class="hll">          <span class="l l-Scalar l-Scalar-Plain">filter</span><span class="p p-Indicator">:</span> <span class="s">&quot;(objectClass=posixGroup)&quot;</span>
</span><span class="hll">          <span class="l l-Scalar l-Scalar-Plain">userMatchers</span><span class="p p-Indicator">:</span>
</span><span class="hll">            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">userAttr</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">DN</span>
</span><span class="hll">              <span class="l l-Scalar l-Scalar-Plain">groupAttr</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">member</span>
</span><span class="hll">          <span class="l l-Scalar l-Scalar-Plain">nameAttr</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">cn</span>
</span><span class="hll"><span class="l l-Scalar l-Scalar-Plain">host_regex</span><span class="p p-Indicator">:</span> <span class="s">&#39;[\w.-]+\.my_center\.edu&#39;</span>
</span><span class="hll"><span class="l l-Scalar l-Scalar-Plain">node_uri</span><span class="p p-Indicator">:</span> <span class="s">&#39;/node&#39;</span>
</span><span class="hll"><span class="l l-Scalar l-Scalar-Plain">rnode_uri</span><span class="p p-Indicator">:</span> <span class="s">&#39;/rnode&#39;</span>
</span></pre></div>
</div>
<p>You can read more about these options under
<a class="reference internal" href="../../../../reference/files/ood-portal-yml.html#ood-portal-generator-configuration-configure-reverse-proxy"><span class="std std-ref">Configure Reverse Proxy</span></a>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>What if my site foregos the FQDN in the host names for compute nodes, and
we have compute names that give their hosts as:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">ab001</span></code> … <code class="docutils literal notranslate"><span class="pre">ab100</span></code> (for the AB cluster)</li>
<li><code class="docutils literal notranslate"><span class="pre">pn001</span></code> … <code class="docutils literal notranslate"><span class="pre">pn500</span></code> (for the PN cluster)</li>
<li><code class="docutils literal notranslate"><span class="pre">xy001</span></code> … <code class="docutils literal notranslate"><span class="pre">xy125</span></code> (for the XY cluster)</li>
</ul>
<p>You could then use the following regular expression in your configuration
file:</p>
<div class="last highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">host_regex</span><span class="p p-Indicator">:</span> <span class="s">&#39;(ab|pn|xy)\d+&#39;</span>
<span class="l l-Scalar l-Scalar-Plain">node_uri</span><span class="p p-Indicator">:</span> <span class="s">&#39;/node&#39;</span>
<span class="l l-Scalar l-Scalar-Plain">rnode_uri</span><span class="p p-Indicator">:</span> <span class="s">&#39;/rnode&#39;</span>
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Do not add start (<code class="docutils literal notranslate"><span class="pre">^</span></code>, <code class="docutils literal notranslate"><span class="pre">A</span></code>) or end (<code class="docutils literal notranslate"><span class="pre">$</span></code>, <code class="docutils literal notranslate"><span class="pre">Z</span></code>) of string/line
anchors as this regular expression will be inserted into another regular
expression.</p>
</div>
<div class="admonition danger">
<p class="first admonition-title">Danger</p>
<p>Failing to add an appropriate regular expression to the Reverse Proxy
opens you up to possible phishing attacks. As a malicious party could
send links to unsuspecting users as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">ondemand</span><span class="o">.</span><span class="n">my_center</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="n">rnode</span><span class="o">/</span><span class="n">phishing</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="mi">80</span><span class="o">/...</span>
</pre></div>
</div>
<p class="last">And users will implicitly trust the link since it points to the trusting
domain of <code class="docutils literal notranslate"><span class="pre">ondemand.my_center.edu</span></code>.</p>
</div>
</li>
<li><p class="first">Build/install the updated Apache configuration file:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo /opt/ood/ood-portal-generator/sbin/update_ood_portal
</pre></div>
</div>
</li>
<li><p class="first">Restart the Apache server to have the changes take effect:</p>
<dl class="docutils">
<dt>RHEL/CentOS 7:</dt>
<dd><div class="first last highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl try-restart httpd24-httpd.service httpd24-htcacheclean.service
</pre></div>
</div>
</dd>
<dt>RHEL/Rocky 8:</dt>
<dd><div class="first last highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl try-restart httpd.service htcacheclean.service
</pre></div>
</div>
</dd>
<dt>Ubuntu:</dt>
<dd><div class="first last highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo systemctl try-restart apache2.service
</pre></div>
</div>
</dd>
</dl>
</li>
</ol>
</div>
<div class="section" id="verify-it-works">
<h2>3.3. Verify it Works<a class="headerlink" href="#verify-it-works" title="Permalink to this headline">¶</a></h2>
<p>We can test that the reverse proxy is now functional by starting up a simple
server on a compute node and connecting to it through the proxy with our
browser.</p>
<ol class="arabic">
<li><p class="first">SSH to any compute node that matches the regular expression above:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>ssh n0001.ten.osc.edu
</pre></div>
</div>
</li>
<li><p class="first">Start up a very simple listening server on a high number port:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>nc -l <span class="m">5432</span>
</pre></div>
</div>
</li>
<li><p class="first">In your browser navigate to this server using the Apache reverse proxy with
the following URL format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">ondemand</span><span class="o">.</span><span class="n">my_center</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="n">node</span><span class="o">/&lt;</span><span class="n">host</span><span class="o">&gt;/&lt;</span><span class="n">port</span><span class="o">&gt;/...</span>
</pre></div>
</div>
<p>So for our simplified case lets use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">ondemand</span><span class="o">.</span><span class="n">my_center</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="n">node</span><span class="o">/</span><span class="n">n0001</span><span class="o">.</span><span class="n">ten</span><span class="o">.</span><span class="n">osc</span><span class="o">.</span><span class="n">edu</span><span class="o">/</span><span class="mi">5432</span><span class="o">/</span>
</pre></div>
</div>
</li>
<li><p class="first">Go back to your SSH session and verify that it received the browser
request:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>nc -l <span class="m">5432</span>
<span class="c1"># GET /node/n0691.ten.osc.edu/5432/ HTTP/1.1</span>
<span class="c1"># Host: n0691.ten.osc.edu:5432</span>
<span class="c1"># Upgrade-Insecure-Requests: 1</span>
...
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As we don’t have the simple server return anything to the browser, you
can ignore any errors or warnings you see in your browser.</p>
</div>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../../../enable-desktops.html" class="btn btn-neutral float-right" title="Enable Interactive Desktop" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="modify-cluster-configuration.html" class="btn btn-neutral float-left" title="2. Modify Cluster Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2022, Ohio Supercomputer Center

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Documentation Versions</span>
    v: 
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      
        <dd><a href="https://OSC.github.io/ood-documentation/latest/how-tos/app-development/interactive/setup/enable-reverse-proxy.html">latest</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-2.0/how-tos/app-development/interactive/setup/enable-reverse-proxy.html">2.0</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.8/how-tos/app-development/interactive/setup/enable-reverse-proxy.html">1.8</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.7/how-tos/app-development/interactive/setup/enable-reverse-proxy.html">1.7</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.6/how-tos/app-development/interactive/setup/enable-reverse-proxy.html">1.6</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.5/how-tos/app-development/interactive/setup/enable-reverse-proxy.html">1.5</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.4/how-tos/app-development/interactive/setup/enable-reverse-proxy.html">1.4</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.3/how-tos/app-development/interactive/setup/enable-reverse-proxy.html">1.3</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.2/how-tos/app-development/interactive/setup/enable-reverse-proxy.html">1.2</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.1/how-tos/app-development/interactive/setup/enable-reverse-proxy.html">1.1</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/release-1.0/how-tos/app-development/interactive/setup/enable-reverse-proxy.html">1.0</a></dd>
      
        <dd><a href="https://OSC.github.io/ood-documentation/develop/how-tos/app-development/interactive/setup/enable-reverse-proxy.html">develop</a></dd>
      
    </dl>
    <dl>
      <dt>On GitHub</dt>
        <dd>
          <a href="http://openondemand.org/">Website</a>
        </dd>
        <dd>
          <a href="https://github.com/OSC/Open-OnDemand">Main Repo</a>
        </dd>
    </dl>
    <hr/>
    Theme provided by <a href="http://www.readthedocs.org">Read the Docs</a>.
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>